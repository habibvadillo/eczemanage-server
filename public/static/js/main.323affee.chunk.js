(this["webpackJsonpEczeManage-client"]=this["webpackJsonpEczeManage-client"]||[]).push([[0],{218:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(83),s=n.n(i),r=(n(92),n(16)),l=n(3),o=n(2),d=n(4),j=n(0);n(94);var u=function(e){return Object(j.jsxs)("form",{onSubmit:e.onSignup,children:[Object(j.jsx)("h2",{children:"Sign Up"}),Object(j.jsx)("label",{htmlFor:"firstname",children:"First Name"}),Object(j.jsx)("input",{type:"text",id:"firstname",name:"firstname"}),Object(j.jsx)("label",{htmlFor:"lastname",children:"Last Name"}),Object(j.jsx)("input",{type:"text",id:"lastname",name:"lastname"}),Object(j.jsx)("label",{htmlFor:"dob",children:"Date of Birth"}),Object(j.jsx)("input",{type:"date",id:"dob",name:"dob"}),Object(j.jsx)("label",{htmlFor:"username",children:"Choose a username"}),Object(j.jsx)("input",{type:"text",id:"username",name:"username"}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)("input",{type:"text",id:"email",name:"email"}),Object(j.jsx)("label",{htmlFor:"password",children:"Create Password"}),Object(j.jsx)("input",{type:"text",id:"password",name:"password"}),Object(j.jsx)("button",{type:"submit",children:"Sign Up"})]})};function b(e){return Object(j.jsxs)("form",{onSubmit:e.onSignin,children:[Object(j.jsx)("h2",{children:"Sign in"}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)("input",{type:"text",id:"email",name:"email"}),Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",id:"password",name:"password"}),Object(j.jsx)("button",{type:"submit",children:"Sign in"})]})}var h=n(87),O=function(e){var t={labels:e.days,datasets:[{label:"hrs of Sleep",data:e.sleep,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]};return Object(j.jsx)(h.a,{data:t,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},m=n(5),p=n.n(m),g="https://aderm-manager.herokuapp.com",f=n(11),x=(n(218),function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(!1),r=Object(o.a)(s,2),l=r[0],d=r[1],u=Object(c.useState)(!1),b=Object(o.a)(u,2),h=b[0],m=b[1],x=Object(c.useState)(null),v=Object(o.a)(x,2),S=v[0],y=v[1],w=Object(c.useState)(null),C=Object(o.a)(w,2),F=C[0],N=C[1],k=Object(c.useState)(null),D=Object(o.a)(k,2),E=D[0],M=D[1],I=Object(c.useState)(null),_=Object(o.a)(I,2),J=_[0],A=_[1],U=Object(c.useState)(null),P=Object(o.a)(U,2),Y=P[0],q=P[1],B=Object(c.useState)(!0),H=Object(o.a)(B,2),W=(H[0],H[1]),z=Object(c.useState)(!0),R=Object(o.a)(z,2),L=(R[0],R[1]),T=Object(c.useState)(!0),Z=Object(o.a)(T,2),G=(Z[0],Z[1]),K=Object(c.useState)(null),Q=Object(o.a)(K,2),V=Q[0],X=Q[1],$=Object(c.useState)(null),ee=Object(o.a)($,2),te=(ee[0],ee[1]);Object(c.useEffect)((function(){p.a.get("".concat(g,"/api/user"),{withCredentials:!0}).then((function(e){X(e.data),L(!1),console.log("user fetched"),console.log("fetching meals and days"),p.a.get("".concat(g,"/api/meals"),{withCredentials:!0}).then((function(e){N(e.data),W(!1),console.log("meals fetched")})).catch((function(e){W(!1),te(e.response.data)})),p.a.get("".concat(g,"/api/days"),{withCredentials:!0}).then((function(e){console.log(e.data.sort((function(e,t){return e.date.localeCompare(t.date)})).slice(-7)),M(e.data.sort((function(e,t){return e.date.localeCompare(t.date)})).slice(-7)),console.log("days fetched"),A(e.data[e.data.length-1]),y(e.data[e.data.length-1].meals.map((function(e){return e.name}))),q(e.data[e.data.length-1].sleep),console.log("today fetched"),G(!1)})).catch((function(e){console.log(e),G(!1),te(e)}))})).catch((function(e){L(!1),G(!1),console.log(e)}))}),[]);var ne=function(e){console.log("switch day to ",e.date),E.forEach((function(t){t._id===e._id&&(console.log(e.meals),A(e),y(e.meals.map((function(e){return"string"===typeof e?e:e.name}))),q(e.sleep||0),i(!1),d(!1))}))},ce=a?Object(j.jsx)("div",{id:"my-modal",children:Object(j.jsxs)("form",{id:"sleep-form",onSubmit:function(t){var n=60*t.target.hours.value*60*1e3+60*t.target.minutes.value*1e3;i(!1),q(n);var c=JSON.parse(JSON.stringify(E));c.forEach((function(e){e._id===J._id&&(e.sleep=n)})),M(c);var a=JSON.parse(JSON.stringify(J));a.sleep=n,console.log(a),A(a),e.submitSleepDuration(t,J)},children:[Object(j.jsxs)("h3",{children:["Edit Sleep for ",J.date]}),Object(j.jsx)("label",{htmlFor:"hours",children:"Hours"}),Object(j.jsx)("input",{type:"number",name:"hours",id:"hours"}),Object(j.jsx)("label",{htmlFor:"minutes",children:"Minutes"}),Object(j.jsx)("input",{type:"number",name:"minutes",id:"minutes"}),Object(j.jsx)("button",{id:"closeSleepForm",onClick:function(e){e.preventDefault(),i(!1)},children:"x"}),Object(j.jsx)("button",{type:"submit",children:"Submit"})]})}):null,ae=l?Object(j.jsx)("div",{id:"my-modal",children:Object(j.jsxs)("form",{id:"meals-form",onSubmit:function(t){d(!1);var n=Array.from(t.target.meals.selectedOptions,(function(e){return e.innerText}));console.log(n,J),y(n);var c=JSON.parse(JSON.stringify(E));c.forEach((function(e){e.date===J.date&&(e.meals.length=0,n.forEach((function(t){e.meals.push(t)})))})),M(c),e.submitMeals(t,J)},children:[Object(j.jsxs)("h3",{children:["Edit meals from ",J.date]}),Object(j.jsx)("label",{htmlFor:"meals",children:"Select Meals"}),Object(j.jsx)("select",{name:"meals",id:"meals",multiple:!0,children:F.map((function(e){return Object(j.jsx)("option",{value:e._id,children:e.name},e.name)}))}),Object(j.jsx)("button",{id:"closeMealsForm",onClick:function(e){e.preventDefault(),d(!1)},children:"x"}),Object(j.jsx)("button",{type:"submit",children:"Submit"}),Object(j.jsxs)("p",{children:["If you would like to create a brand new meal click"," ",Object(j.jsx)(f.b,{to:"/newmeal",children:"here"})]})]})}):null;return Object(j.jsxs)(j.Fragment,{children:[h?Object(j.jsx)("nav",{id:"dropdown",children:Object(j.jsxs)("ul",{children:[V?Object(j.jsx)("li",{onClick:function(){X(null),y(null),A(null),M(null),m(!1),e.onSignOut()},children:"Signout"}):null,Object(j.jsx)("li",{children:"Privacy Policy"}),Object(j.jsx)("li",{children:"About Us"})]})}):null,Object(j.jsxs)("header",{children:[Object(j.jsx)("h1",{children:"AD Manager"}),Object(j.jsx)("button",{id:"navButton",onClick:function(){m(!h)},children:Object(j.jsx)("i",{className:"fa fa-bars"})})]}),V?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{id:"userInfo",children:Object(j.jsxs)("p",{children:["Hello ",V.name]})}),E&&J?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("ul",{id:"days",children:E.map((function(e){return e.date===J.date?Object(j.jsx)("li",{className:"active",onClick:function(){return ne(e)},children:e.date.match(/\d*\/\d*/)},e.date):Object(j.jsx)("li",{onClick:function(){return ne(e)},children:e.date.match(/\d*\/\d*/)},e.date)}))})}):null,Object(j.jsx)("div",{id:"day",children:J?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:J.date}),Object(j.jsxs)("div",{id:"sleep",children:[Object(j.jsx)("h3",{children:"How you slept"}),Y?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{children:["You had"," ",Object(j.jsxs)("strong",{children:[(Y/36e5).toFixed(2),"hrs"]})," ","of Sleep"]}),a?null:Object(j.jsx)("button",{onClick:function(){i(!0)},children:"Edit Sleep"}),ce]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"You havent logged this sleep"}),a?null:Object(j.jsx)("button",{onClick:function(){i(!0)},children:"Add Sleep"}),ce]})]}),Object(j.jsxs)("div",{id:"meals",children:[Object(j.jsx)("h3",{children:"What you ate"}),S?0===S.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"No meals recorded"}),Object(j.jsx)("button",{onClick:function(){d(!0)},children:"Add Meal"}),ae]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"You had"}),Object(j.jsx)("ul",{children:S.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),Object(j.jsx)("button",{onClick:function(){d(!0)},children:"Edit Meals"}),ae]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(){d(!0)},children:"What did you eat on this day?"}),ae]})]})]}):null}),E&&J?Object(j.jsxs)("div",{id:"weekSummary",children:[Object(j.jsx)("h2",{children:"Your weekly sleep chart"}),Object(j.jsxs)("p",{children:["Average:",(E.filter((function(e){return e.sleep})).reduce((function(e,t,n,c){return e+t.sleep/c.length}),0)/60/60/1e3).toFixed(2),"hrs"]}),Object(j.jsx)(O,{days:E.map((function(e){return e.date})),sleep:E.map((function(e){return e.sleep/36e5}))})]}):null]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"Please start by signing up or signing in!"}),Object(j.jsxs)("div",{id:"landing",children:[Object(j.jsx)(f.b,{to:"signup",children:"Sign Up"}),Object(j.jsx)("p",{children:"or"}),Object(j.jsx)(f.b,{to:"signin",children:"Sign In"})]})]})]})});function v(e){var t=Object(c.useState)({ingreInputs:[0]}),n=Object(o.a)(t,2),i=n[0],s=n[1];return Object(j.jsxs)("form",{onSubmit:e.onCreate,children:[Object(j.jsx)("label",{htmlFor:"name",children:"Meal Name"}),Object(j.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name",required:!0}),Object(j.jsx)("label",{htmlFor:"ingredients",children:"Ingredients"}),i.ingreInputs.map((function(e,t){return Object(j.jsx)(a.a.Fragment,{children:Object(j.jsx)("input",{type:"text",name:"ingredients",id:"ingredients",placeholder:"Ingredient Name",required:!0})},t)})),Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=Object(l.a)(i.ingreInputs);t.push(t.length+1),s({ingreInputs:t})},children:"Add Ingredient"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=Object(l.a)(i.ingreInputs);t.pop(),s({ingreInputs:t})},children:"Remove Ingredient"}),Object(j.jsx)("button",{type:"submit",children:"Add Meal"})]})}function S(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),i=n[0],s=n[1];Object(c.useEffect)((function(){p.a.get("".concat(g,"/api/meals/").concat(e.match.params.id)).then((function(e){console.log(e.data),s(e.data)})).catch((function(e){}))}),[]);return Object(j.jsx)(j.Fragment,{children:i&&Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onUpdate(i._id,t)},children:[Object(j.jsx)("label",{htmlFor:"name",children:"Meal Name"}),Object(j.jsx)("input",{onChange:function(e){var t=e.target.value;console.log(t);var n=JSON.parse(JSON.stringify(i));n.name=t,s(n)},type:"text",name:"name",id:"name",value:"".concat(i.name),required:!0}),Object(j.jsx)("label",{htmlFor:"ingredients",children:"Ingredients"}),i.ingredients.map((function(e,t){return Object(j.jsx)(a.a.Fragment,{children:Object(j.jsx)("input",{onChange:function(e){return function(e,t){var n=e.target.value,c=JSON.parse(JSON.stringify(i));c.ingredients[t]=n,s(c)}(e,t)},type:"text",name:"ingredients",id:"ingredients",value:"".concat(e),required:!0})},t)})),Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(JSON.stringify(i));t.ingredients.push("Ingredient"),s(t)},children:"Add Ingredient"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault();var t=JSON.parse(JSON.stringify(i));t.ingredients.pop(),s(t)},children:"Remove Ingredient"}),Object(j.jsx)("button",{type:"submit",children:"Update Meal"})]})})}n(223);var y=function(){return Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsxs)("div",{className:"spinner",children:[Object(j.jsx)("div",{className:"bounce1"}),Object(j.jsx)("div",{className:"bounce2"}),Object(j.jsx)("div",{className:"bounce3"})]})})};function w(e){console.log(e);var t=e.loading?Object(j.jsx)(y,{}):e.meals.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("a",{href:"/meals/".concat(e._id),children:e.name}),Object(j.jsx)("ul",{children:e.ingredients.map((function(e){return Object(j.jsx)("li",{children:e},e)}))})]},e.name)}));return Object(j.jsxs)("div",{children:[Object(j.jsx)(f.b,{to:"/newmeal",children:"New Meal"}),t]})}function C(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],i=n[1],s=Object(d.g)().id;return Object(c.useEffect)((function(){p.a.get("".concat(g,"/api/meals/").concat(s),{withCredentials:!0}).then((function(e){i(e.data)})).catch((function(e){}))}),[]),console.log(a),Object(j.jsx)("div",{children:a&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:a.name}),Object(j.jsx)("ul",{children:a.ingredients.map((function(e){return Object(j.jsx)("li",{children:e},e)}))}),Object(j.jsx)(f.b,{to:"/meals/edit/".concat(a._id),children:Object(j.jsx)("button",{children:"Edit"})}),Object(j.jsx)("button",{onClick:function(){e.onDelete(a._id)},children:"Delete"})]})})}function F(){var e=Object(d.f)();return Object(j.jsx)("header",{children:Object(j.jsx)("button",{onClick:function(){return e.push("/")},children:"Back"})})}var N=Object(d.h)((function(e){var t=Object(d.f)(),n=Object(c.useState)(null),a=Object(o.a)(n,2),i=a[0],s=a[1],h=Object(c.useState)(null),O=Object(o.a)(h,2),m=(O[0],O[1]),f=Object(c.useState)(null),N=Object(o.a)(f,2),k=(N[0],N[1]),D=Object(c.useState)(!0),E=Object(o.a)(D,2),M=E[0],I=E[1],_=Object(c.useState)(!0),J=Object(o.a)(_,2),A=J[0],U=J[1],P=Object(c.useState)(!0),Y=Object(o.a)(P,2),q=Y[0],B=Y[1],H=Object(c.useState)(null),W=Object(o.a)(H,2),z=W[0],R=W[1],L=Object(c.useState)(null),T=Object(o.a)(L,2),Z=(T[0],T[1]);Object(c.useEffect)((function(){console.log("fetching user"),p.a.get("".concat(g,"/api/user"),{withCredentials:!0}).then((function(e){R(e.data),U(!1),console.log("user fetched"),console.log("fetching meals and days"),p.a.get("".concat(g,"/api/meals"),{withCredentials:!0}).then((function(e){s(e.data),I(!1),console.log("meals fetched")})).catch((function(e){I(!1),Z(e.response.data)})),p.a.get("".concat(g,"/api/days"),{withCredentials:!0}).then((function(e){m(e.data.slice(-7)),console.log("days fetched"),k(e.data[e.data.length-1]),console.log("today fetched"),B(!1)})).catch((function(e){console.log(e),B(!1),Z(e)}))})).catch((function(e){U(!1),B(!1),Z(e.response.data)}))}),[]);var G=function(e){e.preventDefault();var n={email:e.target.email.value,password:e.target.password.value};p.a.post("".concat(g,"/api/signin"),n,{withCredentials:!0}).then((function(e){console.log("Signed in as ",e),R(e.data),t.push("/")})).catch((function(e){console.log(e)}))},K=function(e){e.preventDefault();var n={name:"".concat(e.target.firstname.value," ").concat(e.target.lastname.value),username:e.target.username.value,dob:e.target.dob.value,email:e.target.email.value,password:e.target.password.value};p.a.post("".concat(g,"/api/signup"),n,{withCredentials:!0}).then((function(e){t.push("/signin"),console.log("Signed up as ",e)})).catch((function(e){console.log(e)}))},Q=function(){console.log("signing out!"),p.a.post("".concat(g,"/api/signout"),{},{withCredentials:!0}).then((function(){R(null),s(null),k(null),m(null),t.push("/")})).catch((function(e){console.log(e)}))},V=function(e){e.preventDefault();var n={name:e.target.name.value,ingredients:void 0!==e.target.ingredients.length?[]:e.target.ingredients.value,author:z._id};"object"===typeof n.ingredients&&e.target.ingredients.forEach((function(e){n.ingredients.push(e.value)})),console.log(n,"pressing button!"),p.a.post("".concat(g,"/api/createmeal"),n,{withCredentials:!0}).then((function(e){var n=Object(l.a)(i);n.push(e.data),s(n),t.push("/meals")})).catch((function(e){console.log(e)}))},X=function(e){console.log("deleting!"),p.a.delete("".concat(g,"/api/meals/").concat(e),{},{withCredentials:!0}).then((function(e){var n=i.filter((function(t){return t._id!==e.data._id}));s(n),t.push("/meals")})).catch((function(e){console.log(e)}))},$=function(e,n){n.preventDefault(),I(!0);var c={name:n.target.name.value,ingredients:void 0!==n.target.ingredients.length?[]:n.target.ingredients.value,author:z._id};"object"===typeof c.ingredients&&n.target.ingredients.forEach((function(e){c.ingredients.push(e.value)})),console.log(c),p.a.patch("".concat(g,"/api/meals/").concat(e),{name:c.name,ingredients:c.ingredients,author:c.author},{withCredentials:!0}).then((function(e){var n=e.data,c=i.map((function(e){return n._id===e._id&&(e.name=n.name,e.ingredients.length=0,n.ingredients.forEach((function(t){e.ingredients.push(t)}))),e}));s(c),I(!1),t.push("/meals")})).catch((function(e){}))},ee=function(){var e={date:"".concat((new Date).getDate(),"/").concat((new Date).getMonth()+1,"/").concat((new Date).getFullYear()),author:z._id};console.log(e),p.a.post("".concat(g,"/api/day/start"),e,{withCredentials:!0}).then((function(e){k(e.data)})).catch((function(e){Z(e)}))},te=function(e,t){e.preventDefault();var n=60*e.target.hours.value*60*1e3;n+=60*e.target.minutes.value*1e3,p.a.patch("".concat(g,"/api/day/").concat(t._id),{sleep:n},{withCredentials:!0}).then((function(e){k(e.data)})).catch((function(e){Z(e.response.data)}))},ne=function(e,t){e.preventDefault();var n=Array.from(e.target.meals.selectedOptions,(function(e){return e.value}));console.log(n),p.a.patch("".concat(g,"/api/day/").concat(t._id),{meals:n},{withCredentials:!0})};return A||q?Object(j.jsx)(y,{}):Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",render:function(e){return Object(j.jsx)(x,Object(r.a)({onSignOut:Q,onStart:ee,submitSleepDuration:te,submitMeals:ne},e))}}),Object(j.jsx)(d.a,{path:"/signin",render:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)(b,{onSignin:G})]})}}),Object(j.jsx)(d.a,{path:"/signup",render:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)(u,{onSignup:K})]})}}),Object(j.jsx)(d.a,{path:"/newmeal",render:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)("h1",{children:"New Meal"}),Object(j.jsx)(v,{onCreate:V})]})}}),Object(j.jsx)(d.a,{path:"/meals/edit/:id/",render:function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)(S,Object(r.a)({onUpdate:$},e))]})}}),Object(j.jsx)(d.a,{path:"/meals/:id",render:function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)(C,Object(r.a)({onDelete:X},e))]})}}),Object(j.jsx)(d.a,{path:"/meals",render:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsx)("h1",{children:"Meals"}),Object(j.jsx)(w,{meals:i,loading:M})]})}}),Object(j.jsx)(d.a,{path:"/fast",children:Object(j.jsx)("h1",{children:"Fast Details"})}),Object(j.jsx)(d.a,{path:"sleep",children:Object(j.jsx)("h1",{children:"Sleeps Details"})})]})}));s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(f.a,{children:Object(j.jsx)(N,{})})}),document.getElementById("root"))},92:function(e,t,n){},94:function(e,t,n){}},[[224,1,2]]]);
//# sourceMappingURL=main.323affee.chunk.js.map